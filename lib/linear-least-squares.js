!function(t,s){"object"==typeof exports&&"object"==typeof module?module.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof exports?exports.LinearLeastSquares=s():t.LinearLeastSquares=s()}("undefined"!=typeof self?self:this,function(){return r={},o.m=e=[function(t,s){var e=(r.prototype.process_points=function(){this._sum=[0,0],this._sum_of_squares=[0,0],this._mean=[0,0];for(var t=0,s=this._points;t<s.length;t++){var e=s[t];this._sum[0]=this._sum[0]+e[0],this._sum[1]=this._sum[1]+e[1],this._sum_of_squares[0]=this._sum_of_squares[0]+Math.pow(e[0],2),this._sum_of_squares[1]=this._sum_of_squares[1]+e[0]*e[1]}this._mean[0]=this._sum[0]/this._size,this._mean[1]=this._sum[1]/this._size},r.prototype.slope=function(){return(this._size*this._sum_of_squares[1]-this._sum[0]*this._sum[1])/(this._size*this._sum_of_squares[0]-Math.pow(this._sum[0],2))},r.prototype.y_intercept=function(){return this._mean[1]-this.slope()*this._mean[0]},r.prototype.predicted_point=function(t,s,e){return[s,s*t+e]},r.prototype.evaluate_fit=function(t,s){this._total_sum_of_squares=0,this._sum_of_squares_of_residuals=0;for(var e=this._root_mean_squares_error=0,r=this._points;e<r.length;e++){var o=r[e],i=this.predicted_point(t,o[0],s)[1],_=o[1]-this._mean[1],u=o[1]-i;this._sum_of_squares_of_residuals=this._sum_of_squares_of_residuals+Math.pow(u,2),this._total_sum_of_squares=this._total_sum_of_squares+Math.pow(_,2)}this._root_mean_squares_error=Math.sqrt(this._sum_of_squares_of_residuals/this._size),this._r_squared=1-this._sum_of_squares_of_residuals/this._total_sum_of_squares},r.prototype.compute_fit=function(){this.process_points();var t=this.slope(),s=this.y_intercept();return this.evaluate_fit(t,s),{m:t,b:s,rmse:this._root_mean_squares_error,r_squared:this._r_squared}},r.prototype.predicted_points=function(t,s){for(var e=[],r=Math.max.apply(Math,this._points.map(function(t){return t[0]})),o=0,i=Array.from(Array(r).keys());o<i.length;o++){var _=i[o];e.push([_,_*t+s])}return e},r);function r(t){this._points=t,this._size=this._points.length,this._sum=[0,0],this._sum_of_squares=[0,0],this._mean=[0,0]}t.exports=e}],o.c=r,o.d=function(t,s,e){o.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(s,t){if(1&t&&(s=o(s)),8&t)return s;if(4&t&&"object"==typeof s&&s&&s.__esModule)return s;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:s}),2&t&&"string"!=typeof s)for(var r in s)o.d(e,r,function(t){return s[t]}.bind(null,r));return e},o.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="",o(o.s=0);function o(t){if(r[t])return r[t].exports;var s=r[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}var e,r});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9MaW5lYXJMZWFzdFNxdWFyZXMvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL0xpbmVhckxlYXN0U3F1YXJlcy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9MaW5lYXJMZWFzdFNxdWFyZXMvLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm0iLCJwcm9jZXNzX3BvaW50cyIsIl9zdW0iLCJfc3VtX29mX3NxdWFyZXMiLCJfbWVhbiIsIl9wb2ludHMiLCJwb2ludCIsIk1hdGgiLCJwb3ciLCJfc2l6ZSIsInNsb3BlIiwieV9pbnRlcmNlcHQiLCJwcmVkaWN0ZWRfcG9pbnQiLCJ4IiwiYiIsImV2YWx1YXRlX2ZpdCIsIl90b3RhbF9zdW1fb2Zfc3F1YXJlcyIsIl9zdW1fb2Zfc3F1YXJlc19vZl9yZXNpZHVhbHMiLCJfcm9vdF9tZWFuX3NxdWFyZXNfZXJyb3IiLCJwcmVkaWN0ZWRfeSIsInlfb2Zmc2V0IiwicmVzaWR1YWwiLCJzcXJ0IiwiX3Jfc3F1YXJlZCIsImNvbXB1dGVfZml0IiwicHJlZGljdGVkX3BvaW50cyIsInBvaW50cyIsIm1heCIsIm1hcCIsIkFycmF5IiwiZnJvbSIsImtleXMiLCJwdXNoIiwibGVuZ3RoIiwiTGluZWFyTGVhc3RTcXVhcmVzIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwicCIsInMiLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBMkNBLEVBQU1DLEdBQzFCLGlCQUFaQyxTQUEwQyxpQkFBWEMsT0FDeENBLE9BQU9ELFFBQVVELElBQ1EsbUJBQVhHLFFBQXlCQSxPQUFPQyxJQUM5Q0QsT0FBTyxHQUFJSCxHQUNlLGlCQUFaQyxRQUNkQSxRQUE0QixtQkFBSUQsSUFFaENELEVBQXlCLG1CQUFJQyxJQVIvQixDQVNvQixvQkFBVEssS0FBdUJBLEtBQU9DLEtBQU8sV0FDaEQsT0NUTUMsRUFBbUIsR0E0QnZCQyxFQUFvQkMsRSxpQkM3QnRCLE9BcUJJLFlBQUFDLGVBQUEsV0FDRUosS0FBS0ssS0FBcUIsQ0FBQyxFQUFHLEdBQzlCTCxLQUFLTSxnQkFBcUIsQ0FBQyxFQUFHLEdBQzlCTixLQUFLTyxNQUFxQixDQUFDLEVBQUcsR0FFOUIsSUFBa0IsVUFBQVAsS0FBS1EsUUFBTCxlQUFjLENBQTNCLElBQUlDLEVBQUssS0FDWlQsS0FBS0ssS0FBSyxHQUFLTCxLQUFLSyxLQUFLLEdBQUtJLEVBQU0sR0FDcENULEtBQUtLLEtBQUssR0FBS0wsS0FBS0ssS0FBSyxHQUFLSSxFQUFNLEdBRXBDVCxLQUFLTSxnQkFBZ0IsR0FBS04sS0FBS00sZ0JBQWdCLEdBQUtJLEtBQUtDLElBQUlGLEVBQU0sR0FBSSxHQUN2RVQsS0FBS00sZ0JBQWdCLEdBQUtOLEtBQUtNLGdCQUFnQixHQUFNRyxFQUFNLEdBQUtBLEVBQU0sR0FHeEVULEtBQUtPLE1BQU0sR0FBS1AsS0FBS0ssS0FBSyxHQUFLTCxLQUFLWSxNQUNwQ1osS0FBS08sTUFBTSxHQUFLUCxLQUFLSyxLQUFLLEdBQUtMLEtBQUtZLE9BR3RDLFlBQUFDLE1BQUEsV0FJRSxPQUhvQmIsS0FBS1ksTUFBUVosS0FBS00sZ0JBQWdCLEdBQU9OLEtBQUtLLEtBQUssR0FBS0wsS0FBS0ssS0FBSyxLQUNsRUwsS0FBS1ksTUFBUVosS0FBS00sZ0JBQWdCLEdBQU1JLEtBQUtDLElBQUlYLEtBQUtLLEtBQUssR0FBSSxLQUtyRixZQUFBUyxZQUFBLFdBQ0UsT0FBUWQsS0FBS08sTUFBTSxHQUFPUCxLQUFLYSxRQUFVYixLQUFLTyxNQUFNLElBR3RELFlBQUFRLGdCQUFBLFNBQWdCWixFQUFXYSxFQUFXQyxHQUNwQyxNQUFPLENBQUNELEVBQUlBLEVBQUliLEVBQUtjLElBR3ZCLFlBQUFDLGFBQUEsU0FBYWYsRUFBV2MsR0FDdEJqQixLQUFLbUIsc0JBQStCLEVBQ3BDbkIsS0FBS29CLDZCQUErQixFQUdwQyxJQUFrQixNQUZsQnBCLEtBQUtxQix5QkFBK0IsRUFFbEIsRUFBQXJCLEtBQUtRLFFBQUwsZUFBYyxDQUEzQixJQUFJQyxFQUFLLEtBQ1JhLEVBQTBCdEIsS0FBS2UsZ0JBQWdCWixFQUFHTSxFQUFNLEdBQUlRLEdBQUcsR0FDL0RNLEVBQTBCZCxFQUFNLEdBQUtULEtBQUtPLE1BQU0sR0FDaERpQixFQUEwQmYsRUFBTSxHQUFLYSxFQUV6Q3RCLEtBQUtvQiw2QkFBK0JwQixLQUFLb0IsNkJBQStCVixLQUFLQyxJQUFJYSxFQUFVLEdBRTNGeEIsS0FBS21CLHNCQUErQm5CLEtBQUttQixzQkFBd0JULEtBQUtDLElBQUlZLEVBQVUsR0FHdEZ2QixLQUFLcUIseUJBQWlDWCxLQUFLZSxLQUFLekIsS0FBS29CLDZCQUErQnBCLEtBQUtZLE9BRXpGWixLQUFLMEIsV0FBYSxFQUFLMUIsS0FBS29CLDZCQUErQnBCLEtBQUttQix1QkFHbEUsWUFBQVEsWUFBQSxXQUVFM0IsS0FBS0ksaUJBRUwsSUFBSUQsRUFBY0gsS0FBS2EsUUFDbkJJLEVBQWNqQixLQUFLYyxjQU12QixPQUpBZCxLQUFLa0IsYUFBYWYsRUFBR2MsR0FFSCxDQUFFLEVBQUtkLEVBQUcsRUFBS2MsRUFBRyxLQUFRakIsS0FBS3FCLHlCQUEwQixVQUFhckIsS0FBSzBCLGFBSy9GLFlBQUFFLGlCQUFBLFNBQWlCekIsRUFBV2MsR0FXMUIsSUFWQSxJQUFJWSxFQUFrQyxHQUVsQ0MsRUFBY3BCLEtBQUtvQixJQUFHLE1BQVJwQixLQUFZVixLQUFLUSxRQUFRdUIsSUFBSSxTQUFBdEIsR0FBUyxPQUFBQSxFQUFNLE1BUWhELE1BQUF1QixNQUFNQyxLQUFLRCxNQUFNRixHQUFLSSxRQUF0QixlQUErQixDQUF4QyxJQUFJbEIsRUFBQyxLQUNSYSxFQUFPTSxLQUFLLENBQUVuQixFQUFJQSxFQUFJYixFQUFLYyxJQUc3QixPQUFPWSxHQUViLEdBM0ZJLFdBQVlBLEdBQ1I3QixLQUFLUSxRQUFrQnFCLEVBQ3ZCN0IsS0FBS1ksTUFBa0JaLEtBQUtRLFFBQVE0QixPQUNwQ3BDLEtBQUtLLEtBQWtCLENBQUMsRUFBRyxHQUMzQkwsS0FBS00sZ0JBQWtCLENBQUMsRUFBRyxHQUMzQk4sS0FBS08sTUFBa0IsQ0FBQyxFQUFHLEdBd0ZuQ1gsRUFBT0QsUUFBVTBDLElEMUVmbkMsRUFBb0JvQyxFQUFJckMsRUFHeEJDLEVBQW9CcUMsRUFBSSxTQUFTNUMsRUFBUzZDLEVBQU1DLEdBQzNDdkMsRUFBb0J3QyxFQUFFL0MsRUFBUzZDLElBQ2xDRyxPQUFPQyxlQUFlakQsRUFBUzZDLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRXZDLEVBQW9CNkMsRUFBSSxTQUFTcEQsR0FDWCxvQkFBWHFELFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWpELEVBQVNxRCxPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWVqRCxFQUFTLGFBQWMsQ0FBRXVELE9BQU8sS0FRdkRoRCxFQUFvQmlELEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRaEQsRUFBb0JnRCxJQUMvQixFQUFQRSxFQUFVLE9BQU9GLEVBQ3BCLEdBQVcsRUFBUEUsR0FBOEIsaUJBQVZGLEdBQXNCQSxHQUFTQSxFQUFNRyxXQUFZLE9BQU9ILEVBQ2hGLElBQUlJLEVBQUtYLE9BQU9ZLE9BQU8sTUFHdkIsR0FGQXJELEVBQW9CNkMsRUFBRU8sR0FDdEJYLE9BQU9DLGVBQWVVLEVBQUksVUFBVyxDQUFFVCxZQUFZLEVBQU1LLE1BQU9BLElBQ3RELEVBQVBFLEdBQTRCLGlCQUFURixFQUFtQixJQUFJLElBQUlNLEtBQU9OLEVBQU9oRCxFQUFvQnFDLEVBQUVlLEVBQUlFLEVBQUssU0FBU0EsR0FBTyxPQUFPTixFQUFNTSxJQUFRQyxLQUFLLEtBQU1ELElBQzlJLE9BQU9GLEdBSVJwRCxFQUFvQndELEVBQUksU0FBUzlELEdBQ2hDLElBQUk2QyxFQUFTN0MsR0FBVUEsRUFBT3lELFdBQzdCLFdBQXdCLE9BQU96RCxFQUFnQixTQUMvQyxXQUE4QixPQUFPQSxHQUV0QyxPQURBTSxFQUFvQnFDLEVBQUVFLEVBQVEsSUFBS0EsR0FDNUJBLEdBSVJ2QyxFQUFvQndDLEVBQUksU0FBU2lCLEVBQVFDLEdBQVksT0FBT2pCLE9BQU9rQixVQUFVQyxlQUFlQyxLQUFLSixFQUFRQyxJQUd6RzFELEVBQW9COEQsRUFBSSxHQUlqQjlELEVBQW9CQSxFQUFvQitELEVBQUksR0E5RW5ELFNBQVMvRCxFQUFvQmdFLEdBRzVCLEdBQUdqRSxFQUFpQmlFLEdBQ25CLE9BQU9qRSxFQUFpQmlFLEdBQVV2RSxRQUduQyxJQUFJQyxFQUFTSyxFQUFpQmlFLEdBQVksQ0FDekNDLEVBQUdELEVBQ0hFLEdBQUcsRUFDSHpFLFFBQVMsSUFVVixPQU5BMEUsRUFBUUgsR0FBVUgsS0FBS25FLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNPLEdBRy9ETixFQUFPd0UsR0FBSSxFQUdKeEUsRUFBT0QsUSxNQXZCWE0iLCJmaWxlIjoibGluZWFyLWxlYXN0LXNxdWFyZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJMaW5lYXJMZWFzdFNxdWFyZXNcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiTGluZWFyTGVhc3RTcXVhcmVzXCJdID0gZmFjdG9yeSgpO1xufSkoKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzKSwgZnVuY3Rpb24oKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiY2xhc3MgTGluZWFyTGVhc3RTcXVhcmVzIHtcbiAgICBfcG9pbnRzOiBBcnJheTxbbnVtYmVyLCBudW1iZXJdPjtcbiAgICBfc2l6ZTogbnVtYmVyO1xuXG4gICAgX3N1bTogIFtudW1iZXIsIG51bWJlcl07XG4gICAgX3N1bV9vZl9zcXVhcmVzOiBbbnVtYmVyLCBudW1iZXJdO1xuICAgIF9tZWFuOiBbbnVtYmVyLCBudW1iZXJdO1xuXG4gICAgX3RvdGFsX3N1bV9vZl9zcXVhcmVzOiBudW1iZXI7XG4gICAgX3N1bV9vZl9zcXVhcmVzX29mX3Jlc2lkdWFsczogbnVtYmVyO1xuICAgIF9yb290X21lYW5fc3F1YXJlc19lcnJvcjogbnVtYmVyO1xuICAgIF9yX3NxdWFyZWQ6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKHBvaW50czogQXJyYXk8W251bWJlciwgbnVtYmVyXT4pIHtcbiAgICAgICAgdGhpcy5fcG9pbnRzICAgICAgICAgPSBwb2ludHM7XG4gICAgICAgIHRoaXMuX3NpemUgICAgICAgICAgID0gdGhpcy5fcG9pbnRzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fc3VtICAgICAgICAgICAgPSBbMCwgMF07XG4gICAgICAgIHRoaXMuX3N1bV9vZl9zcXVhcmVzID0gWzAsIDBdO1xuICAgICAgICB0aGlzLl9tZWFuICAgICAgICAgICA9IFswLCAwXTtcbiAgICB9XG5cbiAgICBwcm9jZXNzX3BvaW50cygpOiB2b2lkIHtcbiAgICAgIHRoaXMuX3N1bSAgICAgICAgICAgICAgID0gWzAsIDBdO1xuICAgICAgdGhpcy5fc3VtX29mX3NxdWFyZXMgICAgPSBbMCwgMF07XG4gICAgICB0aGlzLl9tZWFuICAgICAgICAgICAgICA9IFswLCAwXTtcblxuICAgICAgZm9yIChsZXQgcG9pbnQgb2YgdGhpcy5fcG9pbnRzKSB7XG4gICAgICAgIHRoaXMuX3N1bVswXSA9IHRoaXMuX3N1bVswXSArIHBvaW50WzBdO1xuICAgICAgICB0aGlzLl9zdW1bMV0gPSB0aGlzLl9zdW1bMV0gKyBwb2ludFsxXTtcblxuICAgICAgICB0aGlzLl9zdW1fb2Zfc3F1YXJlc1swXSA9IHRoaXMuX3N1bV9vZl9zcXVhcmVzWzBdICsgTWF0aC5wb3cocG9pbnRbMF0sIDIpO1xuICAgICAgICB0aGlzLl9zdW1fb2Zfc3F1YXJlc1sxXSA9IHRoaXMuX3N1bV9vZl9zcXVhcmVzWzFdICsgKHBvaW50WzBdICogcG9pbnRbMV0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9tZWFuWzBdID0gdGhpcy5fc3VtWzBdIC8gdGhpcy5fc2l6ZTtcbiAgICAgIHRoaXMuX21lYW5bMV0gPSB0aGlzLl9zdW1bMV0gLyB0aGlzLl9zaXplO1xuICAgIH1cblxuICAgIHNsb3BlKCk6IG51bWJlciB7XG4gICAgICBsZXQgcmlzZTogbnVtYmVyID0gKHRoaXMuX3NpemUgKiB0aGlzLl9zdW1fb2Zfc3F1YXJlc1sxXSkgLSAodGhpcy5fc3VtWzBdICogdGhpcy5fc3VtWzFdKTtcbiAgICAgIGxldCBydW46IG51bWJlciAgPSAodGhpcy5fc2l6ZSAqIHRoaXMuX3N1bV9vZl9zcXVhcmVzWzBdKSAtIE1hdGgucG93KHRoaXMuX3N1bVswXSwgMik7XG5cbiAgICAgIHJldHVybiByaXNlIC8gcnVuO1xuICAgIH1cblxuICAgIHlfaW50ZXJjZXB0KCk6IG51bWJlciB7XG4gICAgICByZXR1cm4gKHRoaXMuX21lYW5bMV0pIC0gKHRoaXMuc2xvcGUoKSAqIHRoaXMuX21lYW5bMF0pO1xuICAgIH1cblxuICAgIHByZWRpY3RlZF9wb2ludChtOiBudW1iZXIsIHg6IG51bWJlciwgYjogbnVtYmVyKTogW251bWJlciwgbnVtYmVyXSB7XG4gICAgICByZXR1cm4gW3gsICh4ICogbSkgKyBiXTtcbiAgICB9XG5cbiAgICBldmFsdWF0ZV9maXQobTogbnVtYmVyLCBiOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgIHRoaXMuX3RvdGFsX3N1bV9vZl9zcXVhcmVzICAgICAgICA9IDA7XG4gICAgICB0aGlzLl9zdW1fb2Zfc3F1YXJlc19vZl9yZXNpZHVhbHMgPSAwO1xuICAgICAgdGhpcy5fcm9vdF9tZWFuX3NxdWFyZXNfZXJyb3IgICAgID0gMDtcblxuICAgICAgZm9yIChsZXQgcG9pbnQgb2YgdGhpcy5fcG9pbnRzKSB7XG4gICAgICAgIGxldCBwcmVkaWN0ZWRfeTogIG51bWJlciAgICA9IHRoaXMucHJlZGljdGVkX3BvaW50KG0sIHBvaW50WzBdLCBiKVsxXTtcbiAgICAgICAgbGV0IHlfb2Zmc2V0OiAgICAgbnVtYmVyICAgID0gcG9pbnRbMV0gLSB0aGlzLl9tZWFuWzFdO1xuICAgICAgICBsZXQgcmVzaWR1YWw6ICAgICBudW1iZXIgICAgPSBwb2ludFsxXSAtIHByZWRpY3RlZF95O1xuXG4gICAgICAgIHRoaXMuX3N1bV9vZl9zcXVhcmVzX29mX3Jlc2lkdWFscyA9IHRoaXMuX3N1bV9vZl9zcXVhcmVzX29mX3Jlc2lkdWFscyArIE1hdGgucG93KHJlc2lkdWFsLCAyKTtcblxuICAgICAgICB0aGlzLl90b3RhbF9zdW1fb2Zfc3F1YXJlcyAgICAgICAgPSB0aGlzLl90b3RhbF9zdW1fb2Zfc3F1YXJlcyArIE1hdGgucG93KHlfb2Zmc2V0LCAyKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fcm9vdF9tZWFuX3NxdWFyZXNfZXJyb3IgICAgICAgPSBNYXRoLnNxcnQodGhpcy5fc3VtX29mX3NxdWFyZXNfb2ZfcmVzaWR1YWxzIC8gdGhpcy5fc2l6ZSk7XG5cbiAgICAgIHRoaXMuX3Jfc3F1YXJlZCA9IDEgLSAodGhpcy5fc3VtX29mX3NxdWFyZXNfb2ZfcmVzaWR1YWxzIC8gdGhpcy5fdG90YWxfc3VtX29mX3NxdWFyZXMpO1xuICAgIH1cblxuICAgIGNvbXB1dGVfZml0KCk6IG9iamVjdCB7XG5cbiAgICAgIHRoaXMucHJvY2Vzc19wb2ludHMoKTtcblxuICAgICAgbGV0IG06IG51bWJlciAgID0gdGhpcy5zbG9wZSgpO1xuICAgICAgbGV0IGI6IG51bWJlciAgID0gdGhpcy55X2ludGVyY2VwdCgpO1xuXG4gICAgICB0aGlzLmV2YWx1YXRlX2ZpdChtLCBiKTtcblxuICAgICAgbGV0IGZpdDogb2JqZWN0ID0geyBcIm1cIjogbSwgXCJiXCI6IGIsIFwicm1zZVwiOiB0aGlzLl9yb290X21lYW5fc3F1YXJlc19lcnJvciwgXCJyX3NxdWFyZWRcIjogdGhpcy5fcl9zcXVhcmVkIH07XG5cbiAgICAgIHJldHVybiBmaXQ7XG4gICAgfVxuXG4gICAgcHJlZGljdGVkX3BvaW50cyhtOiBudW1iZXIsIGI6IG51bWJlcik6IEFycmF5PFtudW1iZXIsIG51bWJlcl0+IHtcbiAgICAgIGxldCBwb2ludHM6IEFycmF5PFtudW1iZXIsIG51bWJlcl0+ID0gW107XG5cbiAgICAgIGxldCBtYXg6IG51bWJlciA9IE1hdGgubWF4KC4uLnRoaXMuX3BvaW50cy5tYXAocG9pbnQgPT4gcG9pbnRbMF0pKTtcblxuICAgICAgLy8gZm9yIChsZXQgeCBvZiB4X3ZhbHVlcy5maWx0ZXIoXG4gICAgICAvLyAgICh2YWwsIGksIGFycikgPT4gYXJyLmZpbmRJbmRleCh4ID0+IHggPT09IHZhbCkgPT09IGlcbiAgICAgIC8vICkpIHtcbiAgICAgIC8vICAgcG9pbnRzLnB1c2goWyB4LCAoeCAqIG0pICsgYl0pO1xuICAgICAgLy8gfVxuXG4gICAgICBmb3IgKGxldCB4IG9mIEFycmF5LmZyb20oQXJyYXkobWF4KS5rZXlzKCkpKSB7XG4gICAgICAgIHBvaW50cy5wdXNoKFsgeCwgKHggKiBtKSArIGJdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHBvaW50cztcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTGluZWFyTGVhc3RTcXVhcmVzO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==